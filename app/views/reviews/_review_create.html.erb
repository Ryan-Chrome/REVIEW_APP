<div id = "ReviewNew">
  <div id = "ReviewForm">
    <div class = "review-form-content">
      <%= form_with(model: @review, local: true) do |f| %>
        <div class = "form_field">
          <%= f.label :name, "レビュー対象" %>
          <%= f.text_field :name, class: "form" %>
        </div>
        <div class = "form_field">
          <%= f.label :category, "カテゴリー" %>
          <% categorys = [
            ["書籍", "書籍"],
            ["DVD・ミュージック・ゲーム", "DVD・ミュージック・ゲーム"],
            ["家電・カメラ・AV機器", "家電・カメラ・AV機器"],
            ["パソコン・オフィス用品", "パソコン・オフィス用品"],
            ["ホーム・キッチン・ベッド・DIY", "ホーム・キッチン・ベッド・DIY"],
            ["食品・飲料・お酒", "食品・飲料・お酒"],
            ["薬・美容", "薬・美容"],
            ["ホビー", "ホビー"],
            ["衣類・装飾品", "衣類・装飾品"],
            ["スポーツ", "スポーツ"],
            ["アウトドア", "アウトドア"],
            ["車・バイク", "車・バイク"],
            ["お店", "お店"],
            ["観光地", "観光地"],
            ["その他", "その他"]
          ] %>
          <%= f.select :category, categorys %>
        </div>
        <div class = "form-group" id = "star">
          <%= f.label :rate, "評価：" %>
          <%= f.hidden_field :rate, id: :review_star %>
        </div>
        <div class = "form_field">
          <%= f.label :content, "レビュー" %>
          <%= f.text_area :content, class: "form text" %>
        </div>
        <div class = "image_form_content">
          <div class = "image_form">
            <%= f.label :image1, class: "image_label" do %>
              <div id = "preview1" class = "preview"><span>＋</span></div>
            <% end %>
            <%= f.file_field :image1, class: "image_field" %>
          </div>
          <div class = "image_form">
            <%= f.label :image2, class: "image_label" do %>
              <div id = "preview2" class = "preview"><span>＋</span></div>
            <% end %>
            <%= f.file_field :image2, class: "image_field" %>
          </div>
          <div class = "image_form">
            <%= f.label :image3, class: "image_label" do %>
              <div id = "preview3" class = "preview"><span>＋</span></div>
            <% end %>
            <%= f.file_field :image3, class: "image_field" %>
          </div>
          <div class = "image_form">
            <%= f.label :image4, class: "image_label" do %>
              <div id = "preview4" class = "preview"><span>＋</span></div>
            <% end %>
            <%= f.file_field :image4, class: "image_field" %>
          </div>
          <div class = "image_form">
            <%= f.label :image5, class: "image_label" do %>
              <div id = "preview5" class = "preview"><span>＋</span></div>
            <% end %>
            <%= f.file_field :image5, class: "image_field" %>
          </div>
        </div>
        <%= f.submit "登録", class: "btn" %>
      <% end %>
    </div>
  </div>
</div>
<script type = "text/javascript">
  $("#star").raty({
    size: 36,
    starOff: "<%= asset_path('star-off.png') %>",
    starOn: "<%= asset_path('star-on.png') %>",
    starHalf: "<%= asset_path('star-half.png') %>",
    scoreName: 'review[rate]',
    half: true
  });
  var img1 = document.getElementById("review_image1");
  var img2 = document.getElementById("review_image2");
  var img3 = document.getElementById("review_image3");
  var img4 = document.getElementById("review_image4");
  var img5 = document.getElementById("review_image5");
  var preview1 = document.getElementById("preview1");
  var preview2 = document.getElementById("preview2");
  var preview3 = document.getElementById("preview3");
  var preview4 = document.getElementById("preview4");
  var preview5 = document.getElementById("preview5");
  img1.addEventListener("change", function(evt){
    var file = evt.target.files;
    var num = file.length;
    if (num == 0) {
      preview1.innerHTML = "<span>＋</span>";
    } else {
      var reader = new FileReader();
      reader.readAsDataURL(file[0]);
      reader.onload = function(){
        var dataUrl = reader.result;
        preview1.innerHTML = "<img src = '" + dataUrl + "'>";
      }
    }
  }, false);
  img2.addEventListener("change", function(evt){
    var file = evt.target.files;
    var num = file.length;
    if (num == 0) {
      preview2.innerHTML = "<span>＋</span>";
    } else {
      var reader = new FileReader();
      reader.readAsDataURL(file[0]);
      reader.onload = function(){
        var dataUrl = reader.result;
        preview2.innerHTML = "<img src = '" + dataUrl + "'>";
      }
    }
  }, false);
  img3.addEventListener("change", function(evt){
    var file = evt.target.files;
    var num = file.length;
    if (num == 0) {
      preview3.innerHTML = "<span>＋</span>";
    } else {
      var reader = new FileReader();
      reader.readAsDataURL(file[0]);
      reader.onload = function(){
        var dataUrl = reader.result;
        preview3.innerHTML = "<img src = '" + dataUrl + "'>";
      }
    }
  }, false);
  img4.addEventListener("change", function(evt){
    var file = evt.target.files;
    var num = file.length;
    if (num == 0) {
      preview4.innerHTML = "<span>＋</span>";
    } else {
      var reader = new FileReader();
      reader.readAsDataURL(file[0]);
      reader.onload = function(){
        var dataUrl = reader.result;
        preview4.innerHTML = "<img src = '" + dataUrl + "'>";
      }
    }
  }, false);
  img5.addEventListener("change", function(evt){
    var file = evt.target.files;
    var num = file.length;
    if (num == 0) {
      preview5.innerHTML = "<span>＋</span>";
    } else {
      var reader = new FileReader();
      reader.readAsDataURL(file[0]);
      reader.onload = function(){
        var dataUrl = reader.result;
        preview5.innerHTML = "<img src = '" + dataUrl + "'>";
      }
    }
  }, false);
</script>
 